<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>DOM</title>
	<style>
    ul li{
    	float: left;
    }
    #back{
    	transition:all 0.5s;width:50px;height:50px;border:0;border-radius:0;background-color:rgba(255,255,255,1)
    }
	</style>
</head>
<body>
    <input type="button" value="变形">
    <input type="button" value="かげぶんしんのじゅつ">
    <input type="button" value="stop!">
	<ul>
       <li></li>
	</ul>

	<script>
    var btns = document.getElementsByTagName('input');
    var ul = document.getElementsByTagName('ul')[0];
    var liArr = document.getElementsByTagName("ul")[0].children;
    var m = 0;
    var timer = null;

    ul.style.cssText="list-style:none";

    liArr[0].style.cssText="width:50px;height:50px;border:0;border-radius:50%;background-color:rgba(255,0,0,0.3)";

    btns[0].onclick = function(){
        if(m%2){
        	liArr[0].setAttribute("style","transition:all 0.5s;width:50px;height:50px;border:0;border-radius:0;background-color:rgba(255,0,0,0.7)");
        }else{
        	liArr[0].setAttribute("style","transition:all 0.5s;width:50px;height:50px;border:0;border-radius:50%;background-color:rgba(255,0,0,0.3)");
        }
        m++;
    }

    btns[1].onclick =function (){
        timer =setInterval(function(){
                var li = document.createElement("li");

                li=liArr[0].cloneNode(true);
                
                
                    li.onmouseover = function(){
                        if(this.style.borderRadius=="50%"){
                    
                            this.setAttribute("style","transition:all 0.5s;width:50px;height:50px;border:0;border-radius:0;background-color:rgba(255,0,0,0.3)");
                        }else{
                    
                            this.setAttribute("style","transition:all 0.5s;width:50px;height:50px;border:0;border-radius:50%;background-color:rgba(255,0,0,0.7)");
                        }
                    }  
                ul.appendChild(li); 
        
        },1)

    } 

    btns[2].onclick = function(){
            clearInterval(timer);
    }
     



    function beWhite(){
       var a = parseInt(Math.random()*10000+1);
       if(a<liArr.length){
           liArr[a].style="transition:all 0.5s;width:50px;height:50px;border:0;background-color:rgba(255,255,255,0)";
       } 
    }


    setInterval(beWhite,1)
    

	</script>
</body>
</html>